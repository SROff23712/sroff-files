<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Admin Upload (Uploadcare)</title>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@1/web/uc-file-uploader-regular.min.css"
  >
</head>
<body>
  <h1>Uploader un fichier (admin)</h1>

  <!-- Uploadcare Web Component -->
  <uc-config
    ctx-name="my-uploader"
    pubkey="3a95022cfa5529c1f798"
    use-cloud-image-editor="false"
    source-list="local"
  ></uc-config>

  <uc-file-uploader-regular
    ctx-name="my-uploader"
    class="uc-light"
  ></uc-file-uploader-regular>

  <uc-upload-ctx-provider ctx-name="my-uploader"></uc-upload-ctx-provider>

  <pre id="result"></pre>

  <script type="module">
    import * as UC from 'https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@1/web/uc-file-uploader-regular.min.js';
    UC.defineComponents(UC);

    const ctxProvider = document.querySelector("uc-upload-ctx-provider");

    ctxProvider.addEventListener("common-upload-success", (e) => {
      const urls = e.detail.successEntries.map((entry) => entry.cdnUrl);
      document.getElementById("result").textContent =
        "✅ Upload réussi :\\n" + urls.join("\\n");
      console.log("Uploaded files URL list", urls);
    });
  </script>
</body>
</html>
